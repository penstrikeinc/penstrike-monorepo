import { FC } from 'react';
import { Box, Chip, Grid, Typography } from '@mui/material';
import { useTheme } from '@mui/material/styles';
import { CiCalendar } from 'react-icons/ci';
import { StepComponentProps } from './type';

export const Summery: FC<StepComponentProps> = (props) => {
  const { assetMethods, methods } = props;
  const { watch } = methods;
  const { watch: watchAsset } = assetMethods;
  const theme = useTheme();
  const {
    adminName,
    adminPassword,
    description,
    endDate,
    note,
    pentestName,
    startDate,
    userName,
    userPassword,
  } = watch();
  const { assets } = watchAsset();

  const boxStyle = {
    p: 2,
    mx: 4,
    my: 2,
    borderRadius: 1,
    bgcolor: theme.palette.grey[700],
  };
  return (
    <Grid container>
      <Grid item xs={12} sm={12}>
        <Typography variant="h6" color="inherit" px={3} pt={2}>
          Review & Submit
        </Typography>
      </Grid>

      <Grid item xs={12} sm={12} sx={boxStyle}>
        <Box mb={2}>
          <Typography variant="body2" color="text.secondary">
            Pentest Name
          </Typography>
          <Typography variant="body1" color="inherit">
            {pentestName}{' '}
          </Typography>
        </Box>
        <Box mb={2}>
          <Typography variant="body2" color="text.secondary">
            Description{' '}
          </Typography>
          <Typography variant="body1" color="inherit">
            {description}{' '}
          </Typography>
        </Box>
      </Grid>
      <Grid item xs={12} sm={12} sx={boxStyle}>
        <Typography variant="body2" color="text.secondary">
          Credential
        </Typography>
        <Grid container>
          <Grid item xs={12} sm={6}>
            <Typography variant="body2" mb={2}>
              User Name: {userName}
            </Typography>
            <Typography variant="body2">Admin Name {adminName}</Typography>
          </Grid>
          <Grid item xs={12} sm={6}>
            <Typography variant="body2" mb={2}>
              Password: {userPassword}
            </Typography>
            <Typography variant="body2">Password: {adminPassword}</Typography>
          </Grid>
        </Grid>
      </Grid>
      <Grid item xs={12} sm={12} sx={boxStyle}>
        <Typography variant="body2" color="text.secondary">
          Additional Notes
        </Typography>
        <Typography variant="body1">{note}</Typography>
      </Grid>
      <Grid item xs={12} sm={12} sx={boxStyle}>
        <Typography variant="body2" color="text.secondary">
          Schedule
        </Typography>

        <Typography variant="body1" sx={{ display: 'flex', alignItems: 'center' }}>
          <CiCalendar size={22} style={{ marginRight: 5 }} /> {startDate} to {endDate}
        </Typography>
      </Grid>
      <Grid item xs={12} sm={12} sx={boxStyle}>
        <Typography variant="body1" color="text.secondary" mb={2}>
          Assets
        </Typography>
        {assets.map((asset, index) => (
          <Chip
            key={index}
            label={`${asset.name}  -  ${asset.url}`}
            sx={{ bgcolor: theme.palette.grey[300], mr: 1, mb: 1 }}
          />
        ))}
      </Grid>
    </Grid>
  );
};
