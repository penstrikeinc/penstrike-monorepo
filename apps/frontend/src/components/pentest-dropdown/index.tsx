import { FC, useMemo } from 'react';
import { useGetAllPentestQuery } from 'src/services';
import { mapPentestDataToSelect } from 'src/utils';
import { RHFAutocomplete } from '../hook-form';

interface IDropdownProps {
  disabled?: boolean;
  required?: boolean;
  label?: string;
}

export const PentestDropdown: FC<IDropdownProps> = (props) => {
  const { disabled, required, label = 'Pentest Dropdown' } = props;
  const { data: pentestRes } = useGetAllPentestQuery();

  const pentests = useMemo(() => pentestRes?.data.items || [], [pentestRes?.data.items]);
  const pentestOptions = pentestRes ? mapPentestDataToSelect(pentests) : [];

  return (
    <RHFAutocomplete
      label={label}
      name="pentest"
      disabled={disabled}
      options={pentestOptions}
      required={required}
    />
  );
};
