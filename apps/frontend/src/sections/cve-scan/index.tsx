'use client';

// @mui
import { alpha } from '@mui/material/styles';
import Box from '@mui/material/Box';
import Container from '@mui/material/Container';
// components
import {
  Card,
  CardContent,
  CardHeader,
  FormControl,
  InputAdornment,
  InputLabel,
  MenuItem,
  Select,
  SelectChangeEvent,
  TextField,
  Typography,
} from '@mui/material';
import { FaSearch } from 'react-icons/fa';
import { useState } from 'react';
import { useSettingsContext } from 'src/components/settings';
import { CustomBreadcrumbs, CveScanTable } from 'src/components';
import { paths } from 'src/routes/paths';
import Scrollbar from 'src/components/scrollbar';
import ChartLine from './chart-line';
import ChartRadialBar from './chart-radial-bar';

// ----------------------------------------------------------------------

export function CveScan() {
  const settings = useSettingsContext();
  const [age, setAge] = useState('');

  const handleChange = (event: SelectChangeEvent) => {
    setAge(event.target.value as string);
  };

  return (
    <Container maxWidth={settings.themeStretch ? false : 'xl'}>
      <CustomBreadcrumbs
        heading="Findings"
        links={[
          { name: 'Pentest', href: paths.dashboard.pentest },
          { name: 'Findings', href: paths.dashboard.findings },
        ]}
      />
      <Scrollbar sx={{ height: 'calc(100dvh - 235px)' }}>
        <Box
          mt={3}
          gap={2}
          display="grid"
          gridTemplateColumns={{ xs: 'repeat(1, 1fr)', md: 'repeat(2, 1fr)' }}
        >
          <Card>
            <CardHeader title="Overall Risks" sx={{ mb: 5 }} />
            <ChartRadialBar series={[44, 55]} />
          </Card>
          <Card>
            <Box sx={{ display: 'flex', justifyContent: 'space-between' }}>
              <CardHeader title="Vulnerabilities Overview" />
              <Box pt={2}>
                <FormControl variant="filled" sx={{ mr: 2, minWidth: 120 }}>
                  <InputLabel id="demo-simple-select-standard-label">Last Week</InputLabel>
                  <Select
                    labelId="demo-simple-select-standard-label"
                    id="demo-simple-select-standard"
                    value={age}
                    onChange={handleChange}
                    label="Age"
                  >
                    <MenuItem value="">
                      <em>None</em>
                    </MenuItem>
                    <MenuItem value={10}>Ten</MenuItem>
                    <MenuItem value={20}>Twenty</MenuItem>
                    <MenuItem value={30}>Thirty</MenuItem>
                  </Select>
                </FormControl>
                <FormControl variant="filled" sx={{ mr: 2, minWidth: 120 }}>
                  <InputLabel id="demo-simple-select-standard-label">Critical</InputLabel>
                  <Select
                    labelId="demo-simple-select-standard-label"
                    id="demo-simple-select-standard"
                    value={age}
                    onChange={handleChange}
                    label="Age"
                  >
                    <MenuItem value="">
                      <em>None</em>
                    </MenuItem>
                    <MenuItem value={10}>Ten</MenuItem>
                    <MenuItem value={20}>Twenty</MenuItem>
                    <MenuItem value={30}>Thirty</MenuItem>
                  </Select>
                </FormControl>
              </Box>
            </Box>
            <CardContent>
              <ChartLine
                series={[
                  {
                    name: 'Desktops',
                    data: [10, 41, 35, 51, 49, 62, 69, 91, 148],
                  },
                ]}
              />
            </CardContent>
          </Card>
        </Box>

        <Box
          sx={{
            mt: 5,
            p: 2,
            borderRadius: 2,
            bgcolor: (theme) => alpha(theme.palette.grey[500], 0.04),
            border: (theme) => `dashed 1px ${theme.palette.divider}`,
          }}
        >
          <Box
            sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}
          >
            <Typography variant="h6">CVE Scan</Typography>

            <Box>
              <FormControl variant="filled" sx={{ mr: 1, minWidth: 120 }}>
                <InputLabel id="demo-simple-select-standard-label">Age</InputLabel>
                <Select
                  labelId="demo-simple-select-standard-label"
                  id="demo-simple-select-standard"
                  value={age}
                  onChange={handleChange}
                  label="Age"
                >
                  <MenuItem value="">
                    <em>None</em>
                  </MenuItem>
                  <MenuItem value={10}>Ten</MenuItem>
                  <MenuItem value={20}>Twenty</MenuItem>
                  <MenuItem value={30}>Thirty</MenuItem>
                </Select>
              </FormControl>
              <FormControl variant="filled" sx={{ mr: 1, minWidth: 120 }}>
                <InputLabel id="demo-simple-select-standard-label">Age</InputLabel>
                <Select
                  labelId="demo-simple-select-standard-label"
                  id="demo-simple-select-standard"
                  value={age}
                  onChange={handleChange}
                  label="Age"
                >
                  <MenuItem value="">
                    <em>None</em>
                  </MenuItem>
                  <MenuItem value={10}>Ten</MenuItem>
                  <MenuItem value={20}>Twenty</MenuItem>
                  <MenuItem value={30}>Thirty</MenuItem>
                </Select>
              </FormControl>
              <FormControl variant="filled" sx={{ mr: 1, minWidth: 120 }}>
                <InputLabel id="demo-simple-select-standard-label">Age</InputLabel>
                <Select
                  labelId="demo-simple-select-standard-label"
                  id="demo-simple-select-standard"
                  value={age}
                  onChange={handleChange}
                  label="Age"
                >
                  <MenuItem value="">
                    <em>None</em>
                  </MenuItem>
                  <MenuItem value={10}>Ten</MenuItem>
                  <MenuItem value={20}>Twenty</MenuItem>
                  <MenuItem value={30}>Thirty</MenuItem>
                </Select>
              </FormControl>
              <TextField
                InputProps={{
                  startAdornment: (
                    <InputAdornment position="start">
                      <FaSearch size={18} />
                    </InputAdornment>
                  ),
                }}
                variant="outlined"
                color="primary"
                size="medium"
              />
            </Box>
          </Box>
          <CveScanTable />
        </Box>
      </Scrollbar>
    </Container>
  );
}
